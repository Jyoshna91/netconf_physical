from ncclient import manager, xml_

# Define connection parameters
host = "10.133.35.148"
username = "admin"
password = "tcs123"

# Define the XML filter with the configuration commands to be executed
xml_filter = """
<nf:rpc xmlns:nf="urn:ietf:params:xml:ns:netconf:base:1.0"
        xmlns:nxos="http://www.cisco.com/nxos:1.0" message-id="110">
  <nxos:exec-command>
    <nxos:cmd>conf t ; interface ethernet 1/5 ; no switchport ; ip address 10.10.10.1/24 ; no shutdown</nxos:cmd>
  </nxos:exec-command>
</nf:rpc>
"""

# Establish NETCONF connection and execute the command
with manager.connect(host=host, port=830, username=username, password=password, hostkey_verify=False) as m:
    print("NETCONF Connected")

    # Send the RPC request with the xml_filter
    res = m.dispatch(xml_.to_ele(xml_filter))

    # Print the response
    print("Response:")
    print(res.xml)
